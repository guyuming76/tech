<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 7.1.2.2 (Linux)"/>
	<meta name="created" content="00:00:00"/>
	<meta name="changed" content="2021-04-28T12:40:10.517476305"/>
	<meta name="Originator" content="Microsoft Word 14"/>
	<meta name="ProgId" content="Word.Document"/>
	<script language="JavaScript">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?2a61a1e3b7adb3fc3b0da490d066c45b";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();

</script>
	<style type="text/css">
		@page { size: 21cm 29.7cm; margin-left: 2cm; margin-right: 1cm; margin-top: 1cm; margin-bottom: 1cm }
		p { margin-bottom: 0.25cm; color: #000000; line-height: 115%; background: transparent }
		a:link { color: #000080; so-language: zxx; text-decoration: underline }
	</style>
</head>
<body lang="zh-CN" text="#000000" link="#000080" vlink="#800000" dir="ltr"><p class="msonormal">
&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><font size="5" style="font-size: 18pt">接</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><a href="https://www.zhihu.com/question/456651702/answer/1856061693"><font color="#0000ff"><font face="Wingdings"><font size="5" style="font-size: 18pt"><u>https://www.zhihu.com/question/456651702/answer/1856061693</u></font></font></font></a>&nbsp;</span></font><font size="5" style="font-size: 18pt">帖子，从哪里开始呢？我刚好干到这里：
&nbsp;</font><font face="Liberation Serif, serif"><span lang="en-US"><a href="https://forums.gentoo.org/viewtopic-p-8603250.html#8603250"><font color="#0000ff"><font face="Wingdings"><font size="5" style="font-size: 18pt"><u>https://forums.gentoo.org/viewtopic-p-8603250.html#8603250</u></font></font></font></a></span></font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><img src="emergeAnalysis1.files/emergeAnalysis1294.png" name="Image1" align="bottom" width="1335" height="751" border="0"/>
&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><img src="emergeAnalysis1.files/emergeAnalysis1300.png" name="Image2" align="bottom" width="824" height="581" border="0"/>
&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><font size="4" style="font-size: 16pt">额，貌似文件有点大了，内存应该够啊</font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><img src="emergeAnalysis1.files/emergeAnalysis1323.png" name="Image3" align="bottom" width="953" height="470" border="0"/>
&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><font size="5" style="font-size: 18pt">换个小点的抓</font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><img src="emergeAnalysis1.files/emergeAnalysis1335.png" name="Image4" align="bottom" width="1126" height="389" border="0"/>
&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><font size="4" style="font-size: 16pt">这回打开了，什么“</font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">backtrack_depgraph</font></font>”&nbsp;</span></font><font size="4" style="font-size: 16pt">从方法名上可以猜出是回溯依赖关系的，但这里有个问题，</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">emerge_main
</font></font></span></font><font size="4" style="font-size: 16pt">感觉是主程序，应该只调用一次，但应该有个在安装包列表上的循环啊，这幅图没有列出方法调用的次数啊</font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">,
</font></font></span></font><font size="4" style="font-size: 16pt">不知别的</font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">Profiler
</font></font></span></font><font face="宋体"><font size="4" style="font-size: 16pt">如何？</font></font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><img src="emergeAnalysis1.files/emergeAnalysis1474.png" name="Image5" align="bottom" width="1867" height="1050" border="0"/>
&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><font size="4" style="font-size: 16pt">这会儿再尝试别的</font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">Profiler
</font></font></span></font><font size="4" style="font-size: 16pt">有点费时间，先凑合，毕竟</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">profiler
</font></font></span></font><font size="4" style="font-size: 16pt">只看个全局大概，后面</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">debugger
</font></font></span></font><font size="4" style="font-size: 16pt">更重要。</font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><font size="4" style="font-size: 16pt">在</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">depgraph.py
</font></font></span></font><font size="4" style="font-size: 16pt">设个断点试试。貌似上图这个长长的路径文件名复制不出来啊，好吧，</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">locate
</font></font></span></font><font size="4" style="font-size: 16pt">一下再从结果复制吧：</font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><img src="emergeAnalysis1.files/emergeAnalysis1608.png" name="Image6" align="bottom" width="776" height="202" border="0"/>
&nbsp;</p>
<p class="msonormal" align="left"><span style="background: #ffffff">&nbsp;</span></p>
<p class="msonormal" align="left"><span style="background: #ffffff">&nbsp;</span></p>
<p class="msonormal" align="left"><font color="#000000"><span style="background: #ffffff"><font face="monospace"><font size="4" style="font-size: 16pt">执行命令：</font></font></span></font><font color="#000000"><span style="background: #ffffff">&nbsp;</span></font><font face="Liberation Serif, serif"><span lang="en-US"><font color="#000000"><font face="monospace"><font size="4" style="font-size: 16pt"><span style="background: #ffffff">python
-m pudb /usr/lib/python3.8/site-packages/_emerge/depgraph.py</span></font></font></font><font color="#000000"><span style="background: #ffffff">&nbsp;</span></font></span></font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><img src="emergeAnalysis1.files/emergeAnalysis1688.png" name="Image7" align="bottom" width="1641" height="923" border="0"/>
&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><font size="5" style="font-size: 18pt">然后按</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">/
</font></font></span></font><font face="宋体"><font size="5" style="font-size: 18pt">进入</font></font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">search,
</font></font></span></font><font size="5" style="font-size: 18pt">输入</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">_select_files
(</font></font></span></font><font size="5" style="font-size: 18pt">就是前面</font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">Profiler</font></font></span></font><font face="宋体"><font size="5" style="font-size: 18pt">结果里面看到的方法名</font></font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">)</font></font></span></font><font size="5" style="font-size: 18pt">，</font>&nbsp;“<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">/”
&nbsp;</font></font></span></font><font size="5" style="font-size: 18pt">键进入</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">search</font></font></span></font><font face="宋体"><font size="5" style="font-size: 18pt">状态，这个很奇妙吧，
和</font></font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">Linux
</font></font></span></font><font face="宋体"><font size="5" style="font-size: 18pt">内核配置
</font></font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">make
menuconfig </font></font></span></font><font size="5" style="font-size: 18pt">里面一致！</font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><font size="5" style="font-size: 18pt">界面提示</font>&nbsp;<font size="5" style="font-size: 18pt">？
键提供帮助，我第一次试是这样的，后来不知道为啥
</font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">F1
</font></font></span></font><font size="5" style="font-size: 18pt">帮助，？</font>&nbsp;<font size="5" style="font-size: 18pt">进入</font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">search
</font></font></span></font><font face="宋体"><font size="5" style="font-size: 18pt">状态了，但
</font></font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">/
search</font></font></span></font><font face="宋体"><font size="5" style="font-size: 18pt">依然有效。帮助界面里面提示如何搜索前一个后一个等。</font></font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><font size="5" style="font-size: 18pt">找到“喜欢的”代码行后，
按键</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">b
</font></font></span></font><font size="5" style="font-size: 18pt">设置断点（这个键和</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">gdb,
pdb </font></font></span></font><font size="5" style="font-size: 18pt">都一致，</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">breakpoint
</font></font></span></font><font size="5" style="font-size: 18pt">嘛，大家没异议）</font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><font size="5" style="font-size: 18pt">虽然我还看不出这个</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">_select_files
</font></font></span></font><font size="5" style="font-size: 18pt">方法是干啥用的，但注释里面提到了</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">.ebuilds
sets. </font></font></span></font>
</p>
<p class="msonormal"><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">.ebuild
</font></font></span></font><font size="5" style="font-size: 18pt">文件就是配置每个包的编译以及依赖关系的，我的理解是一个</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">Bash
</font></font></span></font><font size="5" style="font-size: 18pt">文件，</font>&nbsp;<font size="5" style="font-size: 18pt">会被
</font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">ebuild.sh
</font></font></span></font><font size="5" style="font-size: 18pt">通过</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">source
</font></font></span></font><font size="5" style="font-size: 18pt">命令加载。而这个</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">ebuild.sh
</font></font></span></font><font size="5" style="font-size: 18pt">是被这些</font>&nbsp;“<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">emerge</font></font></span></font><font face="宋体"><font size="5" style="font-size: 18pt">，
</font></font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="5" style="font-size: 18pt">portage</font></font><font size="5" style="font-size: 18pt">”</font><font face="Calibri"><font size="5" style="font-size: 18pt">Python
</font></font></span></font><font face="宋体"><font size="5" style="font-size: 18pt">代码调用的</font></font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><img src="emergeAnalysis1.files/emergeAnalysis11146.png" name="Image8" align="bottom" width="1641" height="924" border="0"/>
&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><font size="4" style="font-size: 16pt">按键 </font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">q
</font></font></span></font><font face="宋体"><font size="4" style="font-size: 16pt">退出，然后</font></font></p>
<p class="msonormal" align="left"><font face="monospace"><font size="6" style="font-size: 22pt"><span lang="en-US"><span style="background: #ffffff">nano
/usr/lib/python3.8/site-packages/_emerge/main.py</span></span></font></font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><font size="4" style="font-size: 16pt">在文件开始加入代码</font></p>
<p class="msonormal" align="left" style="margin-bottom: 0.42cm"><font face="Liberation Serif, serif"><span lang="en-US"><font color="#54ffff"><font face="monospace"><font size="6" style="font-size: 22pt"><b><span style="background: #ffffff">from</span></b></font></font></font><font color="#000000"><span style="background: #ffffff">&nbsp;</span></font><font color="#000000"><font face="monospace"><font size="6" style="font-size: 22pt"><span style="background: #ffffff">pudb
</span></font></font></font><font color="#54ffff"><font face="monospace"><font size="6" style="font-size: 22pt"><b><span style="background: #ffffff">import</span></b></font></font></font><font color="#000000"><span style="background: #ffffff">&nbsp;</span></font><font color="#000000"><font face="monospace"><font size="6" style="font-size: 22pt"><span style="background: #ffffff">set_trace;
set_trace(paused=</span></font></font></font><font color="#ff54ff"><font face="monospace"><font size="6" style="font-size: 22pt"><b><span style="background: #ffffff">False</span></b></font></font></font><font color="#000000"><font face="monospace"><font size="6" style="font-size: 22pt"><span style="background: #ffffff">)</span></font></font></font></span></font></p>
<p class="msonormal"><font size="4" style="font-size: 16pt">表示加载</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">pudb
</font></font></span></font><font size="4" style="font-size: 16pt">开始调试，但此处并不中断执行</font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">:
</font></font><a href="https://documen.tician.de/pudb/usage.html"><font color="#0000ff"><font face="Wingdings"><font size="4" style="font-size: 16pt"><u>https://documen.tician.de/pudb/usage.html</u></font></font></font></a>&nbsp;</span></font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><img src="emergeAnalysis1.files/emergeAnalysis11407.png" name="Image9" align="bottom" width="1619" height="911" border="0"/>
&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">Ctrl+X</font></font></span></font><font face="宋体"><font size="4" style="font-size: 16pt">退出，</font></font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">nano
</font></font></span></font><font size="4" style="font-size: 16pt">的好处就是常用快捷显示在底部。有个段子说让一个新手尝试退出</font>&nbsp;<font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">vi
</font></font></span></font><font size="4" style="font-size: 16pt">编辑器，产生的按键序列将会是一个随机数。</font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal" align="left"><font size="4" style="font-size: 16pt">接下来运行
</font><font face="Liberation Serif, serif"><span lang="en-US"><font color="#000000"><font face="monospace"><font size="6" style="font-size: 22pt"><span style="background: #ffffff">emerge
--update &nbsp;@system</span></font></font></font></span></font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><font size="4" style="font-size: 16pt">不久，就弹出</font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">pudb</font></font></span></font><font size="4" style="font-size: 16pt">界面，停在刚设的断点上：</font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><img src="emergeAnalysis1.files/emergeAnalysis11538.png" name="Image10" align="bottom" width="1526" height="858" border="0"/>
&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><font size="4" style="font-size: 16pt">可以用光标上下左右键在各个窗格间移动，查看调用栈（</font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">stack</font></font></span></font><font size="4" style="font-size: 16pt">）</font>&nbsp;<font size="4" style="font-size: 16pt">各级的代码和变量值（</font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">Variables</font></font></span></font><font size="4" style="font-size: 16pt">）</font><font face="Liberation Serif, serif"><span lang="en-US"><font face="Calibri"><font size="4" style="font-size: 16pt">,</font></font></span></font><font size="4" style="font-size: 16pt">及设置更多断点。不会觉得自己少生了一只照顾鼠标的手。</font></p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal"><img src="emergeAnalysis1.files/emergeAnalysis11625.png" name="Image11" align="bottom" width="1513" height="851" border="0"/>
&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
<p class="msonormal">&nbsp;</p>
</body>
</html>